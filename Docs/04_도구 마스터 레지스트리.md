
# 도구 마스터 레지스트리 (Tool Master Registry)

이 문서는 `Docs/ref/Tool_Defined.md`에 정의된 50개 도구(Context 25 + Action 25)를 대상으로, 각 도구에 대해 아래 3가지를 표준 형식으로 기록합니다.

1. Tool Schema.json (도구 호출/상태 스키마)
2. 애니메이션 트리거 조건(State-Driven)
3. 애니메이션 UI 구현 전략(고품질 2D 레이어 + Compose 애니메이션)

## 공통 원칙

### Layered View

`Docs/02_기능 명세서.md`의 Layered View 정책을 따릅니다.

- Base Layer: 고정 배경(Top-view / Interior-view)
- Status Layer: Context Tools 시각화
- Action Layer: Action Tools 실행 애니메이션

### State-Driven Animation

모든 애니메이션은 ViewModel의 상태(`toolState`) 변화에 의해 트리거됩니다.

### 스키마 해석 규칙(중요)

- `ToolSchema/Context_tool_schema.json`
  - `function.parameters`는 **입력 파라미터가 아니라 반환(상태) 스키마**입니다.
  - 단위(kph 등)는 시스템 데이터로 오가지 않으므로 스키마에 넣지 않고 UI 표기에서만 관리합니다.
- `ToolSchema/Action_tool_schema.json`
  - `function.parameters`는 **Action 호출 입력 파라미터**입니다.
  - 빈 `properties`는 허용하지 않습니다(Option A). 입력이 논리적으로 없어도 최소 1개 이상의 표준 파라미터를 포함합니다.

### 스키마 검증/엄격성 정책(팀 표준)

- 모든 `type: "OBJECT"`는 `additionalProperties: false`를 기본으로 하며, 스키마에 정의되지 않은 필드는 허용하지 않습니다.
- `confidence`는 `0.0 ~ 1.0` 범위를 가집니다.
- `duration_ms`는 `0 ~ 3,600,000`(1시간) 범위를 가집니다.
- `time_to_change`는 음수가 될 수 없습니다(`>= 0`).
- `timestamp`는 ISO-8601 형식(예: `2026-02-04T23:27:00+09:00`, `2026-02-04T14:27:00Z`)을 사용합니다.
- 본 문서의 JSON 코드블록은 가독성을 위한 요약본일 수 있으며, 최종 기준은 `ToolSchema/*.json`입니다.

### 레벨/심각도(enum) 공통 매핑 테이블

UI는 다양한 enum을 그대로 사용하되, 스타일/애니메이션 강도는 아래 매핑 규칙으로 통일합니다.

| Enum Set | UI Severity (0~3) | UI 의미(권장) |
| --- | --- | --- |
| `info / warning / danger` | `0 / 1 / 2` | 정보 / 주의 / 위험 |
| `safe / warning / danger` | `0 / 1 / 2` | 안전 / 주의 / 위험 |
| `normal / warning / danger` | `0 / 1 / 2` | 정상 / 주의 / 위험 |
| `low / mid / high` (Risk/Intensity) | `0 / 1 / 2` | 낮음 / 중간 / 높음 |
| `low / mid / high / critical` | `0 / 1 / 2 / 3` | 낮음 / 중간 / 높음 / 치명 |
| `none / low / mid / high` | `0 / 1 / 2 / 3` | 없음 / 낮음 / 중간 / 높음 |
| `good / moderate / poor` | `0 / 1 / 2` | 좋음 / 보통 / 나쁨 |
| `normal / elevated / high` | `0 / 1 / 2` | 정상 / 상승 / 높음 |
| `normal / warm / hot / critical` | `0 / 1 / 2 / 3` | 정상 / 경고 / 위험 / 치명 |

추가 규칙:
- `level` 필드를 통해 UI 강조 강도를 결정하는 Action Tool은 `level`을 필수(required)로 취급합니다.

### 애니메이션 기본 스펙

`Docs/03_UI 디자인 시스템 가이드.md` 기준을 기본으로 합니다.

- Duration: 500ms
- Easing: FastOutSlowInEasing

---

## Context Tools (상황 인지 및 데이터 수집)

### 운전자 모니터링

#### `get_driver_drowsiness_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driver_drowsiness_status",
    "description": "Detects whether the driver is drowsy and provides detection confidence.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether drowsiness is detected." },
        "confidence": { "type": "NUMBER", "description": "Detection confidence (0.0-1.0).", "minimum": 0.0, "maximum": 1.0 }
      },
      "additionalProperties": false,
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`
- While: `value == true` 동안 상태 강조 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view에서 우선 강조)
- 2D Overlay:
  - 운전자 얼굴/눈 영역에 반투명 경고 오버레이 PNG
- Compose:
  - `AnimatedVisibility`로 경고 배지/텍스트 표시
  - 오버레이 `alpha`를 `animateFloatAsState`로 전환
  - 필요 시 `rememberInfiniteTransition`로 미세한 Pulse(Scale/Alpha)

---

#### `get_steering_grip_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_steering_grip_status",
    "description": "Detects whether the driver is holding the steering wheel (hands-on).",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether hands-on is detected." },
        "confidence": { "type": "NUMBER", "description": "Detection confidence (0.0-1.0)." }
      },
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `true -> false` (hands-off 감지)
- Stop: `value`가 `false -> true`
- While: hands-off 상태에서 강조 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view/Top-view 모두 적용 가능)
- 2D Overlay:
  - 스티어링 휠 영역에 하이라이트 링/점멸 오버레이 PNG
- Compose:
  - 오버레이 `alpha`를 반복 점멸: `rememberInfiniteTransition` + `infiniteRepeatable`
  - `confidence`가 낮으면 오버레이 `alpha`를 낮춰 신뢰도 표현

---

#### `get_driver_vital_signs`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driver_vital_signs",
    "description": "Measures driver vital signs such as heart rate and body temperature.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "heart_rate": { "type": "INTEGER", "description": "Heart rate value." },
        "body_temperature": { "type": "NUMBER", "description": "Body temperature value." },
        "confidence": { "type": "NUMBER", "description": "Overall measurement confidence (0.0-1.0)." }
      },
      "required": ["heart_rate", "body_temperature"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `heart_rate` 또는 `body_temperature` 값 변경
- While: 값이 변경될 때마다 부드러운 전환 유지
- Stop: 별도 종료 조건 없음(상시 표시형)

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view에서 카드/패널로 표시)
- 2D Overlay:
  - 별도 도형보다, Glassmorphism 카드 컴포넌트(텍스트/아이콘) 중심
- Compose:
  - 숫자 전환: 값 변경 시 `animate*AsState` 기반으로 텍스트 색/크기 미세 변화
  - `confidence`로 텍스트 불투명도(`alpha`) 조절

---

#### `get_driver_gaze_direction`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driver_gaze_direction",
    "description": "Estimates the driver's gaze direction and confidence.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "direction": {
          "type": "STRING",
          "description": "Estimated gaze direction.",
          "enum": ["forward", "left", "right", "down", "unknown"]
        },
        "confidence": { "type": "NUMBER", "description": "Estimation confidence (0.0-1.0)." }
      },
      "required": ["direction"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `direction` 변경
- 강조 조건: `direction != forward` 또는 `direction == down`
- Stop: `direction == forward`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view)
- 2D Overlay:
  - 운전자 얼굴 주변에 시선 방향을 암시하는 얇은 화살표/하이라이트 PNG
- Compose:
  - 방향 전환 시 오버레이 위치를 `animateOffsetAsState`로 부드럽게 이동
  - `confidence`로 오버레이 `alpha` 조절

---

#### `get_driver_stress_index`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driver_stress_index",
    "description": "Computes a driver stress index and qualitative level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "Stress index value (normalized)." },
        "level": { "type": "STRING", "description": "Qualitative stress level.", "enum": ["low", "mid", "high"] }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `value` 변화
- 강조 조건: `level == high`
- Stop: `level == low`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 화면 하단/상단에 매우 얇은 컬러 오버레이(안전: Teal, 주의: Amber, 위험: Red)
- Compose:
  - `animateColorAsState`로 오버레이 컬러 전환
  - `level == high`에서 미세 Pulse(Alpha)

---

### 주행 제어 및 이력

#### `get_vehicle_speed`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_vehicle_speed",
    "description": "Reads the current vehicle speed as a numeric value.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "Current vehicle speed." }
      },
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value` 변경
- While: 값 변동이 있을 때마다 부드러운 전환 유지
- Stop: 별도 종료 조건 없음(상시 표시형)

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- UI 표기:
  - Neural Grid 카드에서 단위(kph)를 함께 표기하되, 시스템 상태값은 숫자만 유지
- Compose:
  - 속도 텍스트의 `alpha/scale`를 미세하게 `animateFloatAsState`
  - 큰 변화량(예: 급가속)에서만 짧은 Pulse

---

#### `get_lka_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_lka_status",
    "description": "Indicates whether Lane Keeping Assist (LKA) is enabled.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether LKA is enabled." }
      },
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`
- While: `value == true` 동안 차선 가이드 강조 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Top-view 우선)
- 2D Overlay:
  - 차선 가이드라인 PNG(좌/우 라인) 오버레이
- Compose:
  - `value == true`에서 `alpha`를 0->1로 `animateFloatAsState`
  - 비활성화 시 자연스럽게 Fade-out

---

#### `get_driving_duration_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driving_duration_status",
    "description": "Provides accumulated driving duration and qualitative fatigue level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "Accumulated driving duration." },
        "level": { "type": "STRING", "description": "Fatigue level inferred from duration.", "enum": ["low", "mid", "high"] }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `value` 변화
- 강조 조건: `level == high`
- Stop: `level == low`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 상단에 작은 피로도 인디케이터(Glass 카드) + 얇은 컬러 바
- Compose:
  - `level`에 따라 컬러 바를 `animateColorAsState` (safe/amber/red)
  - `level == high`에서 컬러 바가 느리게 Pulse

---

#### `get_recent_warning_history`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_recent_warning_history",
    "description": "Returns a list of recently issued warnings with timestamps.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "warnings": {
          "type": "ARRAY",
          "description": "Recent warnings (most recent first).",
          "items": {
            "type": "OBJECT",
            "properties": {
              "type": { "type": "STRING", "description": "Warning type identifier." },
              "severity": { "type": "STRING", "description": "Warning severity.", "enum": ["info", "warning", "danger"] },
              "timestamp": { "type": "STRING", "description": "Event timestamp (ISO-8601 recommended).", "pattern": "^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?(?:Z|[+-]\\d{2}:\\d{2})$" }
            },
            "additionalProperties": false,
            "required": ["type", "severity", "timestamp"]
          }
        }
      },
      "additionalProperties": false,
      "required": ["warnings"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `warnings`에 새 항목 추가(리스트 길이 증가)
- Stop: 별도 종료 조건 없음

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (보조), Thinking Log(Tab 3)와 연동 가능
- Compose:
  - 새 항목 추가 시 해당 Row를 `AnimatedVisibility`로 Fade/Slide-in
  - `severity == danger`면 아이콘 Pulse

---

#### `get_sensor_health_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_sensor_health_status",
    "description": "Checks the operational health of sensors and perception models.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "overall_ok": { "type": "BOOLEAN", "description": "Overall system health flag." },
        "camera_ok": { "type": "BOOLEAN", "description": "Whether the camera subsystem is healthy." },
        "model_ok": { "type": "BOOLEAN", "description": "Whether the AI/perception model subsystem is healthy." }
      },
      "required": ["overall_ok", "camera_ok", "model_ok"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `overall_ok == false` 또는 `camera_ok == false` 또는 `model_ok == false`
- Stop: 모든 값이 `true`로 복귀

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 시스템 상태 배지(Shield/Camera/AI 아이콘) 오버레이
- Compose:
  - 문제가 있는 항목만 `alpha` 점멸
  - `overall_ok == false`면 전체 UI에 아주 얇은 Amber tint

---

### 외부 안전 및 노면

#### `get_lane_departure_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_lane_departure_status",
    "description": "Detects lane departure and provides lane detection confidence.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether a lane departure is detected." },
        "confidence": { "type": "NUMBER", "description": "Lane detection confidence (0.0-1.0)." }
      },
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`
- While: 차선 이탈 상태 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Top-view)
- 2D Overlay:
  - 차선 라인 PNG 오버레이
- Compose:
  - `value == true`에서 차선 라인의 `alpha`를 점멸
  - `confidence`가 낮을수록 `alpha`를 낮춰 표현

---

#### `get_forward_collision_risk`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_forward_collision_risk",
    "description": "Evaluates forward collision risk with a score and qualitative level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "score": { "type": "NUMBER", "description": "Collision risk score (normalized)." },
        "level": { "type": "STRING", "description": "Collision risk level.", "enum": ["low", "mid", "high"] },
        "confidence": { "type": "NUMBER", "description": "Risk estimation confidence (0.0-1.0)." }
      },
      "required": ["score", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `score` 증가
- 강조 조건: `level == high`
- Stop: `level == low`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 전방 충돌 경고 아이콘(Front) 오버레이
- Compose:
  - `level`에 따라 컬러를 `animateColorAsState` (Teal/Amber/Red)
  - `level == high`에서 아이콘 Pulse + 얇은 화면 Tint

---

#### `get_driving_environment`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_driving_environment",
    "description": "Provides coarse driving environment conditions such as weather and visibility.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "weather": { "type": "STRING", "description": "Weather condition.", "enum": ["clear", "rain", "snow", "fog", "unknown"] },
        "road_condition": { "type": "STRING", "description": "Road surface condition.", "enum": ["dry", "wet", "icy", "unknown"] },
        "visibility_level": { "type": "STRING", "description": "Visibility level.", "enum": ["good", "moderate", "poor", "unknown"] }
      },
      "required": ["weather", "road_condition", "visibility_level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `weather` 또는 `road_condition` 또는 `visibility_level` 변경
- Stop: 별도 종료 조건 없음

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 날씨/노면/가시거리 아이콘 레이어(클린한 단색 라인 아이콘)
- Compose:
  - 아이콘 변경 시 `AnimatedContent`로 Fade 전환
  - `visibility_level == poor`에서 화면에 아주 얇은 Fog tint(Alpha 낮게)

---

#### `get_road_surface_friction`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_road_surface_friction",
    "description": "Estimates road surface friction / slipperiness as a numeric value.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "Estimated friction value (normalized)." },
        "level": { "type": "STRING", "description": "Qualitative friction level.", "enum": ["low", "mid", "high"] }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `value` 감소
- 강조 조건: `level == low`
- Stop: `level == high`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 미끄러짐/트랙션 아이콘 오버레이
- Compose:
  - `level == low`에서 아이콘 점멸 + 얇은 Icy tint
  - 값 변화는 텍스트/게이지의 `animateFloatAsState`

---

#### `get_blind_spot_collision_risk`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_blind_spot_collision_risk",
    "description": "Evaluates blind spot collision risk and whether a vehicle is detected in blind spot.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether a vehicle is detected in the blind spot." },
        "level": { "type": "STRING", "description": "Collision risk level.", "enum": ["low", "mid", "high"] },
        "confidence": { "type": "NUMBER", "description": "Estimation confidence (0.0-1.0)." }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true` 또는 `level` 상승
- Stop: `value == false` 그리고 `level == low`
- While: 위험 상태 강조 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Top-view)
- 2D Overlay:
  - 좌/우 사각지대 경고 인디케이터 PNG
- Compose:
  - `value == true`에서 해당 방향 인디케이터를 점멸
  - `confidence`로 `alpha` 조절

---

#### `get_external_environmental_hazards`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_external_environmental_hazards",
    "description": "Identifies environmental hazards such as debris, construction zones, and obstacles.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "hazards": {
          "type": "ARRAY",
          "description": "Detected hazards in the driving environment.",
          "items": {
            "type": "OBJECT",
            "properties": {
              "kind": { "type": "STRING", "description": "Hazard kind.", "enum": ["debris", "construction", "accident", "other"] },
              "severity": { "type": "STRING", "description": "Hazard severity.", "enum": ["low", "mid", "high"] }
            },
            "required": ["kind", "severity"]
          }
        },
        "confidence": { "type": "NUMBER", "description": "Overall hazard identification confidence (0.0-1.0)." }
      },
      "required": ["hazards"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `hazards.length > 0`
- Stop: `hazards.length == 0`
- While: 위험이 존재하는 동안 강조 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 위험 아이콘(낙하물/공사/사고) 오버레이 + 리스트 패널
- Compose:
  - 위험 아이콘은 `severity`에 따라 컬러/점멸 강도 변경
  - 리스트는 `AnimatedVisibility`로 Slide-in

---

### 연결성 및 동승자

#### `get_v2x_traffic_info`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_v2x_traffic_info",
    "description": "Provides V2X-based traffic signal and incident information.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "signal_state": { "type": "STRING", "description": "Traffic signal state if available.", "enum": ["red", "yellow", "green", "unknown"] },
        "time_to_change": { "type": "INTEGER", "description": "Seconds until the signal changes if available.", "minimum": 0 },
        "incident_level": { "type": "STRING", "description": "Traffic incident severity near the vehicle.", "enum": ["none", "low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["signal_state", "incident_level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `signal_state` 또는 `incident_level` 변경
- While: `incident_level == high`에서 강조
- Stop: `incident_level == none`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 신호등 아이콘 + 작은 카운트다운 텍스트
- Compose:
  - 신호 상태 변경 시 `animateColorAsState`
  - `time_to_change`는 숫자 롤링/페이드 전환

---

#### `get_v2x_emergency_vehicle_proximity`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_v2x_emergency_vehicle_proximity",
    "description": "Detects proximity of emergency vehicles via V2X.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether an emergency vehicle is nearby." },
        "distance": { "type": "NUMBER", "description": "Estimated distance to the nearest emergency vehicle." },
        "direction": { "type": "STRING", "description": "Relative direction of the approaching emergency vehicle.", "enum": ["front", "rear", "left", "right", "unknown"] },
        "confidence": { "type": "NUMBER", "description": "Estimation confidence (0.0-1.0)." }
      },
      "required": ["value", "direction"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`
- While: `value == true` 동안 방향 인디케이터 유지

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 사이렌 아이콘 + 방향 화살표 오버레이
- Compose:
  - 사이렌 아이콘 Pulse
  - `direction`에 따라 화살표 위치/회전을 `animate*AsState`

---

#### `get_rear_occupant_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_rear_occupant_status",
    "description": "Detects whether a rear occupant or pet remains in the rear seat.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether any rear occupant is detected." },
        "confidence": { "type": "NUMBER", "description": "Detection confidence (0.0-1.0)." }
      },
      "required": ["value"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view)
- 2D Overlay:
  - 뒷좌석 좌석 아이콘/하이라이트 오버레이
- Compose:
  - `value == true`에서 좌석 영역 `alpha` Pulse

---

#### `get_passenger_seat_occupancy`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_passenger_seat_occupancy",
    "description": "Returns seat-by-seat occupancy and measured weight values.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "seats": {
          "type": "ARRAY",
          "description": "Per-seat occupancy list.",
          "items": {
            "type": "OBJECT",
            "properties": {
              "seat": { "type": "STRING", "description": "Seat identifier.", "enum": ["driver", "front_passenger", "rear_left", "rear_center", "rear_right"] },
              "occupied": { "type": "BOOLEAN", "description": "Whether the seat is occupied." },
              "weight": { "type": "NUMBER", "description": "Measured seat weight value." }
            },
            "required": ["seat", "occupied"]
          }
        },
        "confidence": { "type": "NUMBER", "description": "Overall measurement confidence (0.0-1.0)." }
      },
      "required": ["seats"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `seats` 내 특정 좌석의 `occupied` 변화
- Stop: 별도 종료 조건 없음

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Interior-view)
- 2D Overlay:
  - 좌석 맵 오버레이(각 좌석 영역)
- Compose:
  - `occupied == true` 좌석 영역만 `alpha`를 높이고, 변경 시 Fade 전환
  - `confidence`로 전체 표시 강도 조절

---

### 차량 및 보안

#### `get_cabin_air_quality`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_cabin_air_quality",
    "description": "Provides a cabin air quality index value and qualitative level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "Air quality index value." },
        "level": { "type": "STRING", "description": "Air quality level.", "enum": ["good", "moderate", "poor"] }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경
- 강조 조건: `level == poor`
- Stop: `level == good`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- Compose:
  - 카드 배경 컬러를 `level`에 따라 `animateColorAsState`
  - `level == poor`에서 아이콘 Pulse

---

#### `get_cabin_co2_concentration`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_cabin_co2_concentration",
    "description": "Provides cabin CO2 concentration as a numeric value and qualitative level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "NUMBER", "description": "CO2 concentration value." },
        "level": { "type": "STRING", "description": "CO2 level category.", "enum": ["normal", "elevated", "high"] }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경
- 강조 조건: `level == high`
- Stop: `level == normal`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- Compose:
  - `level`에 따라 CO2 아이콘 컬러 전환
  - `level == high`에서 얇은 Amber/Red 오버레이

---

#### `get_ev_battery_thermal_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_ev_battery_thermal_status",
    "description": "Provides EV battery thermal state information.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "temperature": { "type": "NUMBER", "description": "Battery temperature value." },
        "level": { "type": "STRING", "description": "Thermal severity level.", "enum": ["normal", "warm", "hot", "critical"] },
        "cooling_active": { "type": "BOOLEAN", "description": "Whether the thermal management/cooling is active." }
      },
      "required": ["temperature", "level", "cooling_active"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `temperature` 상승
- 강조 조건: `level == critical`
- Stop: `level == normal`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 배터리 아이콘 + 열(Heat) 그라데이션 오버레이
- Compose:
  - `level`에 따라 그라데이션 `alpha/color` 전환
  - `cooling_active == true`면 아이콘에 작은 팬 회전 애니메이션(2D 스프라이트/회전)

---

#### `get_trailer_sway_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_trailer_sway_status",
    "description": "Detects trailer sway and provides severity.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether trailer sway is detected." },
        "level": { "type": "STRING", "description": "Sway severity level.", "enum": ["low", "mid", "high"] },
        "confidence": { "type": "NUMBER", "description": "Detection confidence (0.0-1.0)." }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true`
- Stop: `value`가 `true -> false`
- While: `value == true` 동안 흔들림 강조

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer (Top-view)
- 2D Overlay:
  - 트레일러 연결부/후방에 흔들림 아이콘 오버레이
- Compose:
  - `level`에 따라 흔들림 애니메이션(좌우 오프셋) 진폭 조절
  - `confidence`로 `alpha` 조절

---

#### `get_vehicle_system_intrusion_status`

##### 1) Tool Schema (Context Return Schema)

```json
{
  "function": {
    "name": "get_vehicle_system_intrusion_status",
    "description": "Detects potential vehicle network intrusion and provides severity.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "value": { "type": "BOOLEAN", "description": "Whether an intrusion is detected." },
        "level": { "type": "STRING", "description": "Intrusion severity level.", "enum": ["low", "mid", "high", "critical"] },
        "confidence": { "type": "NUMBER", "description": "Detection confidence (0.0-1.0)." }
      },
      "required": ["value", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `value`가 `false -> true` 또는 `level` 상승
- Stop: `value == false` 그리고 `level == low`

##### 3) 애니메이션 UI 구현 전략

- Layer: Status Layer
- 2D Overlay:
  - 보안(Shield/Lock) 아이콘 오버레이
- Compose:
  - `level == critical`에서 아이콘 강한 Pulse + 얇은 Red tint
  - `confidence`로 `alpha` 조절

---

## Action Tools (능동적 제어 및 대응)

### 시·청·촉각 경고

#### `trigger_steering_vibration`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_steering_vibration",
    "description": "Triggers steering wheel vibration to alert the driver.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "level": { "type": "STRING", "description": "Vibration intensity level.", "enum": ["low", "mid", "high"] },
        "duration_ms": { "type": "INTEGER", "description": "Vibration duration in milliseconds.", "minimum": 0, "maximum": 3600000 }
      },
      "additionalProperties": false,
      "required": ["level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출(도구 실행) 시 즉시
- Stop: `duration_ms` 만료 또는 내부 타이머 종료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Interior-view 우선)
- 2D Overlay:
  - 스티어링 휠 영역에 진동 효과용 하이라이트 PNG
- Compose:
  - `Repeatable` 오프셋(Shake) 애니메이션으로 핸들 레이어 흔들림
  - `level`에 따라 진폭/속도 조절

---

#### `trigger_drowsiness_alert_sound`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_drowsiness_alert_sound",
    "description": "Plays a dedicated anti-drowsiness alert sound.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to play the alert sound." },
        "level": { "type": "STRING", "description": "Alert sound urgency level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 사운드 재생 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 스피커/알람 아이콘 오버레이
- Compose:
  - 사운드 재생 중 아이콘 Pulse
  - `level`에 따라 Pulse 강도/컬러(Amber->Red) 전환

---

#### `trigger_cluster_visual_warning`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_cluster_visual_warning",
    "description": "Shows a visual warning message in the instrument cluster.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "message": { "type": "STRING", "description": "Warning message text." },
        "level": { "type": "STRING", "description": "Warning severity level.", "enum": ["info", "warning", "danger"] }
      },
      "required": ["message", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 사용자 확인(또는 자동 timeout)으로 메시지 닫힘

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 계기판 영역 팝업 카드 오버레이
- Compose:
  - `AnimatedVisibility`로 Slide/Fade-in
  - `level`에 따라 테두리 컬러를 `animateColorAsState`

---

#### `trigger_hud_warning`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_hud_warning",
    "description": "Projects a warning graphic on the head-up display (HUD).",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "message": { "type": "STRING", "description": "HUD warning message text." },
        "level": { "type": "STRING", "description": "Warning severity level.", "enum": ["info", "warning", "danger"] }
      },
      "required": ["message", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: HUD 메시지 종료(자동 timeout 또는 상태 복귀)

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - HUD 영역에 얇은 라인형 그래픽 + 텍스트 오버레이
- Compose:
  - `AnimatedVisibility`로 Fade-in/out
  - `level == danger`에서 미세한 깜빡임(Alpha)

---

#### `trigger_voice_prompt`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_voice_prompt",
    "description": "Speaks a voice guidance prompt to the driver.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "message": { "type": "STRING", "description": "Voice prompt text." },
        "level": { "type": "STRING", "description": "Urgency level for the prompt.", "enum": ["normal", "warning", "danger"] }
      },
      "additionalProperties": false,
      "required": ["message", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: TTS 재생 완료 또는 사용자 취소

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 마이크/보이스 웨이브 아이콘 + 자막 텍스트
- Compose:
  - 재생 중 웨이브 아이콘 Pulse
  - `level`에 따라 컬러 전환

---

#### `update_ambient_mood_lighting`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "update_ambient_mood_lighting",
    "description": "Updates cabin ambient mood lighting according to risk state.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "level": { "type": "STRING", "description": "Lighting state mapped to risk level.", "enum": ["safe", "warning", "danger"] },
        "pulse": { "type": "BOOLEAN", "description": "Whether lighting should pulse." }
      },
      "required": ["level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경 또는 `pulse == true`
- Stop: `level == safe` 그리고 `pulse == false`

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 화면 하단에 가우시안 블러가 적용된 컬러 오버레이
- Compose:
  - `animateColorAsState`로 컬러 전환
  - `pulse == true`면 `rememberInfiniteTransition`으로 Alpha Pulse

---

#### `release_refreshing_scent`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "release_refreshing_scent",
    "description": "Releases a refreshing scent to help the driver stay alert.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to release scent." },
        "duration_ms": { "type": "INTEGER", "description": "Scent release duration in milliseconds.", "minimum": 0, "maximum": 3600000 }
      },
      "additionalProperties": false,
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 `duration_ms` 만료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 향(Perfume) 아이콘 + 미세한 파티클 PNG(연무 형태)
- Compose:
  - 파티클 레이어를 `AnimatedVisibility`로 Fade-in
  - 짧은 시간 동안 위로 떠오르는 `offset` 애니메이션

---

### 시스템 격상 및 기록

#### `escalate_warning_level`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "escalate_warning_level",
    "description": "Escalates the system-wide warning level.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "level": { "type": "STRING", "description": "Target warning level.", "enum": ["low", "mid", "high", "critical"] }
      },
      "required": ["level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: `level`이 하향되거나 정상 상태 복귀 시

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 시스템 경고 레벨 배지(Shield) 오버레이
- Compose:
  - `level`에 따라 배지 컬러를 `animateColorAsState`
  - `critical`에서 배지 Pulse + 얇은 Red tint

---

#### `request_safe_mode`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "request_safe_mode",
    "description": "Requests the vehicle to switch into a safe mode.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to request safe mode." },
        "reason": { "type": "STRING", "description": "Optional reason for requesting safe mode." }
      },
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 Safe Mode 상태 전환 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - "SAFE MODE" 배너 + 잠금 아이콘 오버레이
- Compose:
  - 배너는 `AnimatedVisibility`로 Slide/Fade-in
  - 전환 중에는 얇은 Progress(인디케이터) 애니메이션

---

#### `log_safety_event`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "log_safety_event",
    "description": "Logs a safety-related event to blackbox/system logs.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "event_type": { "type": "STRING", "description": "Event type identifier." },
        "message": { "type": "STRING", "description": "Event message." },
        "level": { "type": "STRING", "description": "Event severity level.", "enum": ["info", "warning", "danger"] }
      },
      "required": ["event_type", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 로그 UI 반영 완료 시

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer(보조) / Thinking Log(Tab 3)와 연동
- Compose:
  - 새 로그 항목 추가 시 Row를 Fade/Slide-in
  - `level`에 따라 아이콘/텍스트 컬러 전환

---

#### `trigger_navigation_notification`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_navigation_notification",
    "description": "Shows a risk notification popup on the navigation screen.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "message": { "type": "STRING", "description": "Notification message." },
        "level": { "type": "STRING", "description": "Notification severity level.", "enum": ["info", "warning", "danger"] }
      },
      "required": ["message", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 사용자가 닫거나 timeout

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 내비게이션 화면 영역에 팝업 카드
- Compose:
  - `AnimatedVisibility`로 Slide-up
  - `level == danger`면 살짝 흔들림(Shake) 1회

---

#### `trigger_rest_recommendation`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_rest_recommendation",
    "description": "Recommends taking a rest and shows the reason.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "reason": { "type": "STRING", "description": "Reason for recommending rest." },
        "level": { "type": "STRING", "description": "Urgency level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["reason", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 사용자가 확인/무시하거나 시나리오 종료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - Rest 아이콘 + 추천 카드(근처 쉼터 안내는 UI에서 별도 표현)
- Compose:
  - 카드 등장: Fade/Slide-in
  - `level`에 따라 강조 컬러 변경

---

### 능동적 물리 제어

#### `pre_tension_safety_belts`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "pre_tension_safety_belts",
    "description": "Pre-tensions safety belts to secure occupants.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to pre-tension belts." },
        "level": { "type": "STRING", "description": "Pre-tension intensity level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 1회 동작 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Interior-view)
- 2D Overlay:
  - 안전벨트 라인 하이라이트 PNG
- Compose:
  - `level`에 따라 하이라이트가 안쪽으로 좁혀지는 Scale 애니메이션
  - 짧은 진동 효과(미세 Shake) 추가 가능

---

#### `activate_hazard_warning_signals`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "activate_hazard_warning_signals",
    "description": "Activates hazard warning signals (blinkers) automatically.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to activate hazard warning signals." },
        "duration_ms": { "type": "INTEGER", "description": "How long the hazard signals should stay active.", "minimum": 0, "maximum": 3600000 }
      },
      "additionalProperties": false,
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 `duration_ms` 만료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Top-view)
- 2D Overlay:
  - 좌/우 방향지시등 영역 오버레이 PNG
- Compose:
  - `enabled == true` 동안 좌/우 인디케이터를 교대로 점멸
  - 점멸 주기는 시스템 정책으로 고정(시각적 일관성)

---

#### `execute_emergency_stop_pull_over`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "execute_emergency_stop_pull_over",
    "description": "Executes an emergency stop and pulls over to a safe location.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to initiate emergency stop/pull-over." },
        "reason": { "type": "STRING", "description": "Reason for emergency stop/pull-over." }
      },
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 정차/갓길 유도 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - "EMERGENCY STOP" 배너 + 위험 삼각형 아이콘
- Compose:
  - 배너는 강한 Fade-in 후 유지
  - 진행 상태(감속/정차)는 작은 Progress 라인으로 표현

---

#### `adjust_seat_bolster_firmness`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "adjust_seat_bolster_firmness",
    "description": "Adjusts seat bolster firmness to secure the driver's body during dynamic driving.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "level": { "type": "STRING", "description": "Bolster firmness level.", "enum": ["low", "mid", "high"] }
      },
      "required": ["level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `level` 변경
- Stop: `level == low`

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Interior-view)
- 2D Overlay:
  - 시트 측면(볼스터) 하이라이트 오버레이
- Compose:
  - `level`에 따라 하이라이트 두께/alpha 증가
  - 변경 시 부드러운 Tween 전환

---

#### `control_window_and_sunroof`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "control_window_and_sunroof",
    "description": "Controls window and sunroof opening/closing for ventilation or weather response.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "target": { "type": "STRING", "description": "Control target.", "enum": ["window", "sunroof", "all"] },
        "action": { "type": "STRING", "description": "Requested action.", "enum": ["open", "close", "vent"] }
      },
      "required": ["target", "action"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 해당 동작 완료 시

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 창문/선루프 아이콘 오버레이
- Compose:
  - `action`에 따라 아이콘이 위/아래로 슬라이드(열림/닫힘)하는 모션
  - `target`이 `all`이면 복수 아이콘 동시 애니메이션

---

### 승객 및 보행자 보호

#### `trigger_emergency_call`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_emergency_call",
    "description": "Triggers an e-Call emergency call after an accident.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to place an emergency call." },
        "level": { "type": "STRING", "description": "Urgency level.", "enum": ["high", "critical"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 통화 연결/완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - e-Call 아이콘 + 긴급 배너
- Compose:
  - `level`에 따라 배너 컬러/점멸 강도 변경
  - 연결 중에는 작은 Progress 인디케이터

---

#### `trigger_ground_projection_warning`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "trigger_ground_projection_warning",
    "description": "Projects a pedestrian/caution warning graphic onto the ground.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "message": { "type": "STRING", "description": "Projection message identifier/text." },
        "level": { "type": "STRING", "description": "Projection severity level.", "enum": ["warning", "danger"] }
      },
      "required": ["message", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: Action 호출 시
- Stop: 투사 종료(자동 timeout 또는 상태 복귀)

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Top-view)
- 2D Overlay:
  - 노면 투사 그래픽 PNG
- Compose:
  - 투사 그래픽은 빠르게 Fade-in 후 유지
  - `level == danger`에서 미세한 Pulse(Alpha)

---

#### `emit_external_pedestrian_alert`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "emit_external_pedestrian_alert",
    "description": "Emits an external pedestrian alert sound.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to emit the external alert." },
        "level": { "type": "STRING", "description": "Alert intensity level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 재생 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 외부 경고 스피커 아이콘
- Compose:
  - 재생 중 아이콘 Pulse
  - `level`에 따라 Pulse 강도 변경

---

#### `deploy_active_pedestrian_protection`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "deploy_active_pedestrian_protection",
    "description": "Deploys active pedestrian protection mechanisms to reduce impact severity.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to deploy active pedestrian protection." }
      },
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 1회 동작 완료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 보닛 리프트/보호 아이콘 오버레이
- Compose:
  - 아이콘을 1회 강하게 Fade-in 후 빠르게 Fade-out

---

### 환경 및 편의

#### `activate_cabin_purification`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "activate_cabin_purification",
    "description": "Activates cabin air purification mode.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to activate purification." },
        "level": { "type": "STRING", "description": "Purification intensity level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false`

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 공기 정화(필터) 아이콘 + 부드러운 파티클(청정) PNG
- Compose:
  - `enabled == true`에서 파티클 레이어 Fade-in
  - `level`에 따라 파티클 강도(Alpha) 조절

---

#### `switch_cabin_air_circulation`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "switch_cabin_air_circulation",
    "description": "Switches cabin air circulation mode between recirculation and fresh air.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "mode": { "type": "STRING", "description": "Target air circulation mode.", "enum": ["recirculate", "fresh_air"] }
      },
      "required": ["mode"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `mode` 변경
- Stop: 별도 종료 조건 없음

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 순환/외기 아이콘 오버레이
- Compose:
  - `mode`에 따라 아이콘 전환(Fade)
  - 전환 순간에만 1회 Pulse

---

#### `activate_wellness_massage`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "activate_wellness_massage",
    "description": "Activates the driver's wellness massage feature.",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to activate massage." },
        "duration_ms": { "type": "INTEGER", "description": "Massage duration in milliseconds.", "minimum": 0, "maximum": 3600000 }
      },
      "additionalProperties": false,
      "required": ["enabled"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false` 또는 `duration_ms` 만료

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer (Interior-view)
- 2D Overlay:
  - 시트 영역에 마사지 웨이브 오버레이
- Compose:
  - 웨이브 레이어가 아래->위로 반복 이동하는 루프 애니메이션

---

#### `set_valet_mode_limitations`

##### 1) Tool Schema (Action Parameters)

```json
{
  "function": {
    "name": "set_valet_mode_limitations",
    "description": "Enables limitations for valet mode (performance/personal data restrictions).",
    "parameters": {
      "type": "OBJECT",
      "properties": {
        "enabled": { "type": "BOOLEAN", "description": "Whether to enable valet mode limitations." },
        "level": { "type": "STRING", "description": "Limitation strictness level.", "enum": ["low", "mid", "high"] }
      },
      "additionalProperties": false,
      "required": ["enabled", "level"]
    }
  }
}
```

##### 2) 애니메이션 트리거 조건

- Start: `enabled == true`
- Stop: `enabled == false`

##### 3) 애니메이션 UI 구현 전략

- Layer: Action Layer
- 2D Overlay:
  - 발레 모드(Valet) 배지 + 잠금 아이콘
- Compose:
  - `enabled == true`에서 배지 Fade-in
  - `level`에 따라 배지 컬러/강조 변경

---
